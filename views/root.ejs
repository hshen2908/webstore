<%- include("./partials/header") %>
<main class="flex-grow">
    <div class="py-2 border-b-[1px] border-solid border-black dark:border-white flex justify-between">
        <ul class="flex flex-wrap">
            <li class="p-2 px-4 text-xl font-normal hover:text-red-600 border-r-[1px] dark:border-white border-black">
                CATEGORY <span class="rotate-[90deg] inline-block ">&#8227;</span>
            </li>
            <li class="p-2 px-4 text-xl font-normal hover:text-red-600 border-r-[1px] dark:border-white border-black">
                MATERIAL <span class="rotate-[90deg] inline-block ">&#8227;</span>
            </li>
            <li class="p-2 px-4 text-xl font-normal hover:text-red-600 border-r-[1px] dark:border-white border-black">
                TYPE <span class="rotate-[90deg] inline-block ">&#8227;</span>
            </li>
            <li class="p-2 px-4 text-xl font-normal hover:text-red-600 border-r-[1px] dark:border-white border-black">
                DIMENSIONS <span class="rotate-[90deg] inline-block ">&#8227;</span>
            </li>
            <li class="p-2 px-4 text-xl font-normal hover:text-red-600 border-r-[1px] dark:border-white border-black">
                SHAPE <span class="rotate-[90deg] inline-block ">&#8227;</span>
            </li>
            <li class="p-2 px-4 text-xl font-normal hover:text-red-600 border-r-[1px] dark:border-white border-black">
                COLOR <span class="rotate-[90deg] inline-block ">&#8227;</span>
            </li>
        </ul>
        <button class="p-2 px-14 text-xl font-normal">
            APPLY FILTERS
        </button>
    </div>
    <section id="productsContainer" class="max-w-none mx-auto p-4 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 justify-between gap-4" data-product-count="<%- glasses.length %>">
        <% glasses.forEach((g, gIndex) => { %>
            <!-- <div class="border-none rounded-lg flex">
                <img src="<%- g.variants[0].images[0].url %>" alt="" class="rounded-lg w-2/3 shadow-sm aspect-square object-cover" loading="lazy">
                <div class="w-1/3 p-4 flex flex-col justify-between bg-gray-100 dark:bg-gray-700 my-1 shadow-sm">
                        <h2 class="text-lg font-medium"><%- `${g.productName} ${g.productCode}` %></h2>
                        
                        <p class="text-sm font-normal">Description Lorem, ipsror eos natus accusamus eius explicabo voluptas, temporibus dolores mollitia harum.</p>
                </div>
            </div> -->
            <% if (!g.hidden) { %>
                <div class="border-none rounded-lg flex min-w-full lg:min-w-0 relative group hover:scale-[1.02] ease-in duration-75">
                    <!-- <img src="" alt="" class="rounded-lg w-2/3 shadow-sm aspect-square object-cover" loading="lazy"> -->
                    <div class="relative rounded-lg w-2/3 shadow-lg flex justify-center">
                        <div id="[<%- gIndex %>]variantsInfoContainerSelector[images]" class="absolute flex justify-between gap-1 bottom-4">
                            <% g.variants[0].images.forEach(image => { %>
                                <a href="#<%- image.fileName.split("/")[1] %>" class="text-gray-700 opacity-50 active:opacity-100 focus:opacity-75">&#9679;</a>                             
                            <% }) %>
                        </div>
                        <div id="[<%- gIndex %>]variantsInfoContainer[images]" class="rounded-lg min-w-full shadow-sm aspect-square object-cover overflow-hidden overflow-x-hidden snap-x snap-mandatory scroll-smooth flex gap-x-4">
                            <% g.variants[0].images.forEach(image => { %>
                                <img src="<%- image.url %>" class="rounded-lg min-w-full shadow-sm aspect-square object-cover snap-center" id="<%- image.fileName.split("/")[1] %>"></img>
                            <% }) %>
                        </div>
                    </div>
                    
                    <div class="absolute -left-1 -top-1 flex flex-col">
                        <h2 id="[<%- gIndex %>]productNewArrivalInfo" class="font-medium py-1 bg-rose-500 inline-block px-8 opacity-90 <%- g.newArrival ? "" : "hidden" %>">NEW ARRIVAL</h2>
                        <h2 id="[<%- gIndex %>]productOnSaleInfo" class="font-medium py-1 bg-yellow-500 text-yellow-900 inline-block px-8 opacity-90 self-start <%- g.onSale ? "" : "hidden" %>">ON SALE</h2>                    
                        <h2 id="[<%- gIndex %>]productHiddenInfo" class="font-medium py-1 bg-slate-500 text-slate-900 inline-block px-8 opacity-90 self-start <%- g.hidden ? "" : "hidden" %>">HIDDEN</h2>
                    </div>
                    
                    <div class="w-1/3 p-4 flex flex-col justify-between my-1 shadow-lg rounded-r-lg">
                        <div class="flex justify-between" style="container-type: inline-size;">
                            <h2 id="[<%- gIndex %>]productNameInfo" class="overflow-ellipsis overflow-hidden text-[16cqw] font-medium block group-hover:text-rose-600"><%- g.name %></h2>
                            <div class="w-[40cqw]">
                                <h2 id="[<%- gIndex %>]productPriceInfo" class="overflow-ellipsis overflow-hidden text-[8cqw] font-medium opacity-70 block before:content-['R$\00a0']"><%- g.price %></h2>
                                <h2 id="[<%- gIndex %>]productTypeInfo" class="overflow-ellipsis overflow-hidden text-[8cqw] font-medium opacity-70 block capitalize"><%- g.type %></h2>
                            </div>
                            
                        </div>
    
                        <div class="border-t-2" style="container-type: inline-size">
                            <h2 class="text-[8cqw] font-medium py-1">COLOR</h2>
                            <div class="flex flex-wrap gap-1" id="[<%- gIndex %>]variantsInfoContainer[color]">
                                <% g.variants.forEach((variant, index) => { %>
                                    <div class="flex" id="[<%- gIndex %>]productVariantInfo[<%- index %>]">
                                        <input class="peer form-radio rounded-md absolute hidden" type="radio" name="[<%- gIndex %>]productVariantInfo"  id="[<%- gIndex %>]productVariantInfoInput[color][<%- index %>]" value="<%- index %>" data-images='<%- JSON.stringify(variant.images) %>'' <%- index === 0 ? "checked" : "" %>>
                                        <label style="background-color: <%- `#${('000000' + Number(variant.color).toString(16)).substr(-6)}` %>;"  id="[<%- gIndex %>]productVariantInfo[color][<%- index %>]" for="[<%- gIndex %>]productVariantInfoInput[color][<%- index %>]" class="w-[16cqw] h-[16cqw] rounded-full bg-[black] p-2 border-2 border-solid border-gray-400 peer-checked:border-rose-600"></label>
                                    </div>
                                <% }) %>
                            </div>
                        </div>
    
                        <div class="border-t-2" style="container-type: inline-size">
                            <h2 class="text-[8cqw] font-medium py-1">CATEGORIES</h2>
                            <div class="flex flex-wrap gap-1">
                                <span id="[<%- gIndex %>]productUnissexInfo" class="text-[5cqw] py-[2cqw] px-[5cqw] font-medium rounded-full bg-teal-200 text-teal-700 <%- g.categories.includes("unissex") ? "" : "hidden" %>">UNISSEX</span>
                                <span id="[<%- gIndex %>]productMenInfo" class="text-[5cqw] py-[2cqw] px-[5cqw] font-medium rounded-full bg-cyan-200 text-cyan-700 <%- g.categories.includes("men") ? "" : "hidden" %>">MEN</span>
                                <span id="[<%- gIndex %>]productWomenInfo" class="text-[5cqw] py-[2cqw] px-[5cqw] font-medium rounded-full bg-purple-200 text-purple-700 <%- g.categories.includes("women") ? "" : "hidden" %>">WOMEN</span>
                                <span id="[<%- gIndex %>]productKidsInfo" class="text-[5cqw] py-[2cqw] px-[5cqw] font-medium rounded-full bg-orange-200 text-orange-700 <%- g.categories.includes("kids") ? "" : "hidden" %>">KIDS</span>
                            </div>
                        </div>
    
                        <div class="border-t-2" style="container-type: inline-size">
                            <h2 class="text-[8cqw] font-medium py-1">MATERIALS</h2>
                            <div class="flex flex-wrap gap-1">
                                <span id="[<%- gIndex %>]productAcetateInfo" class="text-[5cqw] py-[2cqw] px-[5cqw] font-medium rounded-full bg-red-200 text-red-700 <%- g.materials.includes("acetate") ? "" : "hidden" %>">Acetate</span>
                                <span id="[<%- gIndex %>]productStainlessSteelInfo" class="text-[5cqw] py-[2cqw] px-[5cqw] font-medium rounded-full bg-green-200 text-green-700 <%- g.materials.includes("stainless steel") ? "" : "hidden" %>">Stainless Steel</span>
                                <span id="[<%- gIndex %>]productTitaniumInfo" class="text-[5cqw] py-[2cqw] px-[5cqw] font-medium rounded-full bg-blue-200 text-blue-700 <%- g.materials.includes("titanium") ? "" : "hidden" %>">Titanium</span>
                                <span id="[<%- gIndex %>]productTr90Info" class="text-[5cqw] py-[2cqw] px-[5cqw] font-medium rounded-full bg-pink-200 text-orange-700 <%- g.materials.includes("tr90") ? "" : "hidden" %>">Tr90</span>
                            </div>
                        </div>
    
                        <div class="border-t-2" style="container-type: inline-size">
                            <h2 class="text-[8cqw] font-medium py-1">DIMENSIONS</h2>
                            <h3 id="[<%- gIndex %>]productEyeInfo" class="before:content-['eye:\00a0'] after:content-['\00a0mm'] text-[8cqw] font-normal"><%- g.dimensions.eye %></h3>
                            <h3 id="[<%- gIndex %>]productBridgeInfo" class="before:content-['bridge:\00a0'] after:content-['\00a0mm'] text-[8cqw] font-normal"><%- g.dimensions.bridge %></h3>
                            <h3 id="[<%- gIndex %>]productTempleInfo" class="before:content-['temple:\00a0'] after:content-['\00a0mm'] text-[8cqw] font-normal"><%- g.dimensions.temple %></h3>
                        </div>                    
                    </div>
                </div>
            <% } %> 
        <% }) %>
    </section>
</main>
<script src="/scripts/chooseVariant.js" defer></script>
<%- include("./partials/footer") %>
    